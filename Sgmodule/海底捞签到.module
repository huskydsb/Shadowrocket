#!name=海底捞签到任务
#!desc=自动执行海底捞微信小程序签到脚本，默认每天8:00执行。\n使用说明：\n1. 登录海底捞微信小程序，抓包 superapp-public.kiwa-tech.com 域名下的 _haidilao_app_token\n2. 将 token 填写到 hdl_data，多账号用 @ 分割\n3. 可选推送：bark_key 不填则使用脚本内置/青龙推送逻辑
#!openUrl=https://www.haidilao.com
#!author=Sliverkiss[https://github.com/Sliverkiss]
#!icon=https://raw.githubusercontent.com/sliverkiss/QuantumultX/main/icon/hdl.png
#!arguments=获取Cookie开关:true, 签到任务时间:0 8 * * *, 签到任务开关:true
#!arguments-desc=\n★ 获取Cookie开关：是否启用自动抓取海底捞 Token\n★ 签到任务时间：Cron 表达式（默认每天 08:00）\n★ 签到任务开关：是否启用定时签到
#!tag=签到脚本

[Script]

# ==========================
# 获取海底捞 Token（Cookie）
# ==========================

海底捞_获取Cookie = type=http-response, pattern=^https:\/\/superapp-public\.kiwa-tech\.com\/activity\/wxapp\/signin\/querySwitch, script-path=https://raw.githubusercontent.com/huskydsb/Loon/main/Script/hdl_cookie.js, requires-body=false, enable={{{获取Cookie开关}}}, timeout=60

# ==========================
# 海底捞签到任务（主任务）
# ==========================

海底捞_签到 = type=cron, script-path=https://gist.githubusercontent.com/Sliverkiss/354e7994f9ee5cc9cc353b6aba320052/raw/hdl.js, cronexpr={{{签到任务时间}}}, timeout=120, enable={{{签到任务开关}}}

[MITM]
hostname = %APPEND% superapp-public.kiwa-tech.com
